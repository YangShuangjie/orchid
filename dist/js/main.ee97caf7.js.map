{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"electron\"","webpack:///external \"crypto\"","webpack:///external \"assert\"","webpack:///./src/components/ColorTip.vue?0b60","webpack:///./src/assets/feather.svg","webpack:///./src/App.vue?1e58","webpack:///external \"util\"","webpack:///external \"os\"","webpack:///./src/components/ToolBar.vue?e3f6","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"worker_threads\"","webpack:///./src/App.vue?e386","webpack:///./src/components/ToolBar.vue?dc81","webpack:///./src/utils/arrowCoordinate.js","webpack:///src/components/ToolBar.vue","webpack:///./src/components/ToolBar.vue?df8a","webpack:///./src/components/ToolBar.vue","webpack:///./src/components/ColorTip.vue?507a","webpack:///./src/utils/RGB2HEX.js","webpack:///src/components/ColorTip.vue","webpack:///./src/components/ColorTip.vue?3678","webpack:///./src/components/ColorTip.vue","webpack:///./src/utils/captureScreen.js","webpack:///src/App.vue","webpack:///./src/App.vue?7933","webpack:///./src/App.vue","webpack:///./src/App.js","webpack:///./src/assets/brush.svg","webpack:///./src/assets/iphone.mp3","webpack:///external \"events\""],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","require","_vm","this","_h","$createElement","_c","_self","attrs","style","cursor","completeSelectRegion","on","onSelectRegion","directives","rawName","expression","ref","position","left","canvasX","top","canvasY","zIndex","pointerEvents","onDrag","x","y","width","height","toolbarBottom","canvasWidth","canvasHeight","clipDesktop","$event","initSelect","canDrag","isCapture","_e","staticRenderFns","$emit","themeDark","_v","clickUndo","clickRedo","clickSquare","clickCircle","clickArrow","clickLine","clickText","clickBrush","clickLineShape","staticClass","background","_s","config","lineWidth","changeLineShape","borderColor","model","callback","$$v","$set","clickColor","lineColor","changeColor","clickRecognition","clickSave","clickNo","clickYes","mp3path","x1","y1","x2","y2","l1","l2","angle","Math","PI","rotate","atan2","a1","sin","b1","cos","a2","b2","a3","b3","props","Number","canvasProps","components","ColorPicker","showColorPicker","showLineShape","inputText","fontSize","featherCursor","brushCursor","lineCap","lineDash","lineRadius50","lineShape","radius","recordsQueue","computed","selectLineStyle","border","borderBottom","borderRadius","mounted","displayRef","document","getElementById","displayCtx","getContext","assistRef","assistCtx","methods","colseDropDown","unshift","currentData","putImageData","preData","nextData","recordAndClearEvents","onmousemove","onmouseup","setStyle","strokeStyle","shadowColor","setLineDash","onmousedown","e","clientX","clientY","w","h","X2","Y2","textInput","className","contentEditable","color","padding","lineHeight","fontFamily","onblur","onkeydown","focus","ext","url","writeStream","write","imageBuffer","setTimeout","errNotification","close","clearRect","textInputs","forEach","body","silent","icon","notification","textInputBlur","text","split","font","fillStyle","rows","txt","$root","$el","removeChild","target","textInputKeyDown","innerHTML","component","staticStyle","textDecoration","switchColor","hex","rgba","RGB2Hex","values","replace","a","parseFloat","floor","parseInt","g","b","toString","hasCopy","tipboardStyle","mask","navigator","clipboard","writeText","copyColor","remote","screen","getPrimaryDisplay","id","size","setCanvas","canvas","ctx","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","pixelRatio","devicePixelRatio","scale","captureScreen","desktopCapturer","getSources","types","thumbnailSize","then","sources","source","display_id","mediaDevices","getUserMedia","audio","video","mandatory","chromeMediaSource","chromeMediaSourceId","minWidth","maxWidth","minHeight","maxHeight","stream","handleStream","srcObject","onloadedmetadata","play","createImageBitmap","bmp","drawImage","getTracks","stop","ToolBar","ColorTip","captureRegionStyle","draggable","borderWidth","borderStyle","boxShadow","showColorTip","$data","globalCompositeOperation","posX","clientWidth","posY","clientHeight","el","isBeyondLeft","isBeyondBottom","Vue","use","BootstrapVue","IconsPlugin","productionTip","store","Store","screenWidth","screenHeight","theme","showMessage","savePath","app","getPath","playSound","captureColor","render","App","$mount"],"mappings":"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","file":"js/main.ee97caf7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"be94\",\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = require(\"electron\");","module.exports = require(\"crypto\");","module.exports = require(\"assert\");","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ColorTip.vue?vue&type=style&index=0&id=70b686e7&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ColorTip.vue?vue&type=style&index=0&id=70b686e7&lang=less&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/feather.5a7f4448.svg\";","import mod from \"-!../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"","module.exports = require(\"util\");","module.exports = require(\"os\");","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ToolBar.vue?vue&type=style&index=0&id=438261b8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ToolBar.vue?vue&type=style&index=0&id=438261b8&lang=less&scoped=true&\"","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"worker_threads\");","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"layout\"}},[_c('div',{style:({cursor: _vm.completeSelectRegion? 'default':'crosshair'}),attrs:{\"id\":\"mask\"},on:{\"mousedown\":_vm.onSelectRegion}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCapture),expression:\"isCapture\"}],style:(_vm.captureRegionStyle),attrs:{\"id\":\"captureRegion\"}}),_c('canvas',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.completeSelectRegion),expression:\"completeSelectRegion\"}],ref:\"display\",style:({\n        position:'absolute',\n        left:_vm.canvasX+'px',\n        top:_vm.canvasY+'px',\n        zIndex:999,\n        pointerEvents:'none'}),attrs:{\"id\":\"display-canvas\"}}),_c('canvas',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.completeSelectRegion),expression:\"completeSelectRegion\"}],ref:\"assist\",style:({\n        position:'absolute',\n        left:_vm.canvasX+'px',\n        top:_vm.canvasY+'px',\n        zIndex:999,\n        cursor:'move'}),attrs:{\"id\":\"assist-canvas\"},on:{\"mousedown\":_vm.onDrag}}),_c('ToolBar',{directives:[{name:\"position\",rawName:\"v-position\",value:({x: _vm.x,y: _vm.y,width: _vm.width,height: _vm.height}),expression:\"{x,y,width,height}\"},{name:\"show\",rawName:\"v-show\",value:(_vm.completeSelectRegion),expression:\"completeSelectRegion\"}],attrs:{\"toolbarBottom\":_vm.toolbarBottom,\"canvasProps\":{canvasX: _vm.canvasX,canvasY: _vm.canvasY,canvasWidth: _vm.canvasWidth,canvasHeight: _vm.canvasHeight},\"clipDesktop\":_vm.clipDesktop},on:{\"initSelect\":function($event){return _vm.initSelect()},\"closeDrag\":function($event){_vm.canDrag=false}}}),(_vm.showColorTip)?_c('ColorTip',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isCapture),expression:\"!isCapture\"}]}):_vm._e(),_c('video',{attrs:{\"id\":\"video\"}}),_c('canvas',{ref:\"desktop\",attrs:{\"id\":\"desktop-canvas\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"toolbar\"}},[_c('b-button-group',{on:{\"click\":function($event){return _vm.$emit('closeDrag')}}},[_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"orchid-button\"}},[_c('span',[_vm._v(\"🌸\")])]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"undo-button\",\"title\":\"撤销\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"undo-button\"},on:{\"click\":_vm.clickUndo}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"reply-fill\",\"flip-h\":\"\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"redo-button\",\"title\":\"恢复\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"redo-button\"},on:{\"click\":_vm.clickRedo}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"reply-fill\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"square-button\",\"title\":\"矩形\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"square-button\"},on:{\"click\":_vm.clickSquare}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"square\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"circle-button\",\"title\":\"圆形\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"circle-button\"},on:{\"click\":_vm.clickCircle}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"circle\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"arrow-button\",\"title\":\"箭头\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"arrow-button\"},on:{\"click\":_vm.clickArrow}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"arrow-right\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"line-button\",\"title\":\"直线\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"line-button\"},on:{\"click\":_vm.clickLine}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"dash\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"text-button\",\"title\":\"文本\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"text-button\"},on:{\"click\":_vm.clickText}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"fonts\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"brush-button\",\"title\":\"涂鸦\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"brush-button\"},on:{\"click\":_vm.clickBrush}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"brush\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"lineshape-button\",\"title\":\"线型\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"lineshape-button\"}},[_c('span',{on:{\"click\":_vm.clickLineShape}},[_c('b-icon',{attrs:{\"icon\":\"list\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showLineShape),expression:\"showLineShape\"}],staticClass:\"lineshape-content\",style:({top:_vm.toolbarBottom>160? 40+'px':-143+'px'})},[_c('ul',{style:({background:_vm.themeDark? '#6c757d':'#fff'})},[_c('li',[_c('div',{style:(_vm.selectLineStyle)}),_c('p',{staticClass:\"line-width\"},[_vm._v(_vm._s(_vm.config.lineWidth+'px'))])]),_c('li',[_c('hr')]),_c('li',{attrs:{\"data-shape\":\"radius\"},on:{\"click\":_vm.changeLineShape}},[_c('div',{staticClass:\"radius-line\",style:({borderColor:_vm.themeDark? '#000':'#fff'})})]),_c('li',{attrs:{\"data-shape\":\"radius50\"},on:{\"click\":_vm.changeLineShape}},[_c('div',{staticClass:\"radius50-line\",style:({borderColor:_vm.themeDark? '#000':'#fff'})})]),_c('li',{attrs:{\"data-shape\":\"solid\"},on:{\"click\":_vm.changeLineShape}},[_c('div',{staticClass:\"solid-line\",style:({borderColor:_vm.themeDark? '#000':'#fff'})})]),_c('li',{attrs:{\"data-shape\":\"dashed\"},on:{\"click\":_vm.changeLineShape}},[_c('div',{staticClass:\"dash-line\",style:({borderColor:_vm.themeDark? '#000':'#fff'})})])]),_c('b-form-input',{staticClass:\"range-input\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"40\",\"size\":\"sm\"},model:{value:(_vm.config.lineWidth),callback:function ($$v) {_vm.$set(_vm.config, \"lineWidth\", $$v)},expression:\"config.lineWidth\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"color-button\",\"title\":\"颜色\",\"custom-class\":\"tooltip\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"color-button\"}},[_c('span',{on:{\"click\":_vm.clickColor}},[_c('b-icon',{attrs:{\"icon\":\"pen\"}})],1),_c('ColorPicker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showColorPicker),expression:\"showColorPicker\"}],style:({top:_vm.toolbarBottom>380? 40+'px':-345+'px',background:_vm.themeDark? '#6c757d':'#fff'}),attrs:{\"id\":\"colorpicker\",\"color\":_vm.config.lineColor},on:{\"changeColor\":_vm.changeColor}})],1),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"recognition-button\",\"title\":\"识别\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"recognition-button\"},on:{\"click\":_vm.clickRecognition}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"camera\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"save-button\",\"title\":\"另存\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"save-button\"},on:{\"click\":_vm.clickSave}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"download\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"no-button\",\"title\":\"取消\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"no-button\"},on:{\"click\":_vm.clickNo}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"x\"}})],1)]),_c('b-tooltip',{attrs:{\"triggers\":\"focus\",\"target\":\"yes-button\",\"title\":\"确定\"}}),_c('b-button',{attrs:{\"variant\":_vm.themeDark? 'secondary':'light',\"id\":\"yes-button\"},on:{\"click\":_vm.clickYes}},[_c('span',[_c('b-icon',{attrs:{\"icon\":\"check\"}})],1)])],1),_c('audio',{ref:\"audio\",attrs:{\"src\":_vm.mp3path}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * 计算箭头坐标，需要鼠标mousedown坐标点(x1，y1）、鼠标移动坐标点(x2,y2)\n * 假设箭头(对称的一半)与直线夹角15*c，夹角两边长分别为l1=20,l2=10\n */\n\n export default (x1,y1,x2,y2)=>{\n   const  l1 = 20,l2=12,angle=Math.PI/12\n   //计算移动点与点击点之间的角度\n   const rotate = Math.atan2(y2-y1,x2-x1)\n   //计算箭头三个点的坐标，第四个点为鼠标移动点\n   const a1 = x2 - l1*Math.sin(Math.PI/2-rotate-angle)\n   const b1 = y2 - l1*Math.cos(Math.PI/2-rotate-angle)\n\n   const a2 = x2 - l2*Math.cos(rotate)\n   const b2 = y2 - l2*Math.sin(rotate)\n\n   const a3 = x2 - l1*Math.cos(rotate-angle)\n   const b3 = y2 - l1*Math.sin(rotate-angle)\n\n   return [a1,b1,a2,b2,a3,b3]\n }\n","<template>\n  <div id=\"toolbar\">\n    <!-- //点击工具按钮后，选区不可再移动 -->\n    <b-button-group @click=\"$emit('closeDrag')\">\n\n      <!-- <b-tooltip triggers='focus' target='orchid-button' title=\"拖动\"></b-tooltip> -->\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='orchid-button'>\n        <span>🌸</span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='undo-button' title=\"撤销\"></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='undo-button' @click=\"clickUndo\">\n        <span><b-icon icon=\"reply-fill\" flip-h></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='redo-button' title='恢复'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='redo-button' @click=\"clickRedo\">\n        <span><b-icon icon=\"reply-fill\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='square-button' title='矩形'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='square-button' @click=\"clickSquare\">\n        <span><b-icon icon=\"square\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='circle-button' title='圆形'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='circle-button' @click=\"clickCircle\">\n        <span><b-icon icon=\"circle\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='arrow-button' title='箭头'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='arrow-button' @click=\"clickArrow\">\n        <span><b-icon icon=\"arrow-right\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='line-button' title='直线'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='line-button' @click=\"clickLine\">\n        <span><b-icon icon=\"dash\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='text-button' title='文本'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='text-button' @click=\"clickText\">\n        <span><b-icon icon=\"fonts\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='brush-button' title='涂鸦'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='brush-button' @click=\"clickBrush\">\n        <span><b-icon icon=\"brush\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='lineshape-button' title='线型'></b-tooltip>\n      <!-- 框架的<b-dropdown/>组件存在无法更改背景色的bug，这里用原生写一个。 -->\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id=\"lineshape-button\">\n        <span @click=\"clickLineShape\"><b-icon icon=\"list\"></b-icon></span>\n        <div class='lineshape-content'\n          v-show=\"showLineShape\"\n          :style=\"{top:toolbarBottom>160? 40+'px':-143+'px'}\"\n        >\n        <ul :style=\"{background:themeDark? '#6c757d':'#fff'}\">\n          <li>\n            <div :style=\"selectLineStyle\"></div>\n            <p class='line-width'>{{config.lineWidth+'px'}}</p>\n          </li>\n          <li><hr/></li>\n          <li @click='changeLineShape' data-shape='radius'><div class='radius-line' :style=\"{borderColor:themeDark? '#000':'#fff'}\"></div></li>\n          <li @click='changeLineShape' data-shape='radius50'><div class='radius50-line' :style=\"{borderColor:themeDark? '#000':'#fff'}\"></div></li>\n          <li @click='changeLineShape' data-shape='solid'><div class='solid-line' :style=\"{borderColor:themeDark? '#000':'#fff'}\"></div></li>\n          <li @click='changeLineShape' data-shape='dashed'><div class='dash-line' :style=\"{borderColor:themeDark? '#000':'#fff'}\"></div></li>\n       </ul>\n        <b-form-input\n          class=\"range-input\"\n          type=\"range\"\n          min=\"0\"\n          max=\"40\"\n          size='sm'\n          v-model=\"config.lineWidth\"\n        ></b-form-input>\n       </div>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='color-button' title='颜色' custom-class='tooltip'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='color-button'>\n        <span @click=\"clickColor\"><b-icon icon=\"pen\"></b-icon></span>\n        <ColorPicker id='colorpicker'\n          v-show=\"showColorPicker\"\n          :style=\"{top:toolbarBottom>380? 40+'px':-345+'px',background:themeDark? '#6c757d':'#fff'}\"\n          :color=\"config.lineColor\"\n          @changeColor=\"changeColor\"\n        />\n      </b-button>\n\n      <b-tooltip triggers='focus' target='recognition-button' title='识别'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='recognition-button' @click=\"clickRecognition\">\n        <span><b-icon icon=\"camera\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='save-button' title=\"另存\"></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='save-button' @click=\"clickSave\">\n        <span><b-icon icon=\"download\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='no-button' title='取消'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='no-button' @click=\"clickNo\">\n        <span><b-icon icon=\"x\"></b-icon></span>\n      </b-button>\n\n      <b-tooltip triggers='focus' target='yes-button' title='确定'></b-tooltip>\n      <b-button :variant=\"themeDark? 'secondary':'light'\" id='yes-button' @click=\"clickYes\">\n        <span><b-icon icon=\"check\"></b-icon></span>\n      </b-button>\n\n    </b-button-group>\n    <audio :src=\"mp3path\" ref='audio'></audio>\n  </div>\n\n</template>\n\n<script>\nimport brush from '../assets/brush.svg'\nimport feather from '../assets/feather.svg'\n// import picker from '../assets/picker.svg'\nimport mp3 from '../assets/iphone.mp3'\n\nimport ColorPicker from '@caohenghu/vue-colorpicker'\nimport arrowCoordinate from '../utils/arrowCoordinate'\n\nimport { clipboard, nativeImage, remote, ipcRenderer } from 'electron'\nimport fs from 'fs'\nimport path from 'path'\n\n\nexport default {\n  props:{\n    toolbarBottom: Number,\n    canvasProps:Object,\n    clipDesktop:Function\n  },\n  components:{\n    ColorPicker\n  },\n  data() {\n    return {\n      showColorPicker:false,\n      showLineShape:false,\n      inputText:false,\n      fontSize:16,\n      themeDark:this.$root.$data.theme==='dark',\n\n      featherCursor:`url(${feather}) 0 30,default`,\n      brushCursor: `url(${brush}) 0 30,default`,\n      // pickerCursor:`url(${picker}) 0 30,default`,\n      mp3path:mp3,\n\n      config:{\n        lineWidth:2,\n        lineColor:\"#6EFF2A\",\n        lineCap:'round',\n        lineDash:[0,0],\n        // shadowBlur:2,\n        lineRadius50:false,\n        //选项显示用\n        lineShape:'solid',\n        radius:'0px'\n      },\n\n      recordsQueue:[0],\n\n    }\n  },\n  computed:{\n    selectLineStyle(){\n      return {\n        width:'100px',\n        height:'0px',\n        border: 'none',\n        borderBottom:this.config.lineWidth+'px ' + this.config.lineColor + ' ' + this.config.lineShape,\n        borderRadius:this.config.radius\n      }\n    },\n    canvasX(){\n      return this.canvasProps.canvasX\n    },\n    canvasY(){\n      return this.canvasProps.canvasY\n    },\n    canvasWidth(){\n      return this.canvasProps.canvasWidth\n    },\n    canvasHeight(){\n      return this.canvasProps.canvasHeight\n    },\n  },\n  mounted(){\n    this.displayRef = document.getElementById('display-canvas')\n    this.displayCtx = this.displayRef.getContext('2d')\n\n    this.assistRef = document.getElementById('assist-canvas')\n    this.assistCtx = this.assistRef.getContext('2d')\n\n    //----ESC\n    ipcRenderer.on('pressESC',()=>this.clickNo())\n  },\n  methods: {\n    changeColor(color) {\n      const { r, g, b, a } = color.rgba\n      this.config.lineColor = `rgba(${r}, ${g}, ${b}, ${a})`\n    },\n    changeLineShape(e){\n      this.config.lineRadius50 = false\n      let shape = e.target.dataset.shape\n\n      switch(shape){\n        case 'solid':\n          this.config.lineCap='butt'\n          this.config.lineShape = 'solid'\n          this.config.radius = '0px'\n          this.config.lineDash = [0,0]\n          break\n        case 'radius':\n          this.config.lineCap = 'round'\n          this.config.lineShape = 'solid'\n          this.config.radius = this.config.lineWidth/2+'px'\n          this.config.lineDash = [0,0]\n          break\n        case 'radius50':\n          this.config.lineRadius50 = true\n          this.config.lineShape = 'solid'\n          this.config.radius = '50%'\n          this.config.lineDash = [0,0]\n          this.clickLine() //小bug，点击了会关闭下拉框，且和clickCircle相互影响\n          break\n        case 'dashed':\n          this.config.lineDash = [12,10]\n          this.config.lineShape = 'dashed'\n          this.config.radius = '0px'\n          break\n      }\n    },\n    colseDropDown(){\n      this.showColorPicker = this.showLineShape = false\n    },\n    clickUndo(){\n      this.colseDropDown()\n      let currentData = this.recordsQueue.pop()\n      if(currentData){\n        this.recordsQueue.unshift(currentData)\n        let preData = this.recordsQueue[this.recordsQueue.length-1]\n        if(preData){ //!=0\n          this.displayCtx.putImageData(preData,0,0) //恢复前一次状态\n        } else { //===0\n          this.clipDesktop()\n        }\n      }else{\n        this.recordsQueue.push(currentData) //0\n      }\n    },\n    clickRedo(){\n      this.colseDropDown()\n\n      let nextData = this.recordsQueue.shift()\n      if(nextData){\n        this.displayCtx.putImageData(nextData,0,0)\n        this.recordsQueue.push(nextData)\n      }else{\n        this.recordsQueue.unshift(nextData) //0\n      }\n    },\n    recordAndClearEvents(){\n      let currentData = this.displayCtx.getImageData(0,0,this.canvasWidth,this.canvasHeight)\n      this.recordsQueue.push(currentData)\n\n      document.onmousemove = null\n      document.onmouseup = null\n    },\n    setStyle(){\n      this.displayCtx.lineWidth = this.config.lineWidth\n      this.displayCtx.strokeStyle = this.config.lineColor\n      this.displayCtx.shadowColor = this.config.lineColor\n      // this.displayCtx.shadowBlur = this.config.shadowBlur\n      this.displayCtx.lineCap = this.config.lineCap\n      this.displayCtx.setLineDash(this.config.lineDash)\n\n      this.assistCtx.lineWidth = this.config.lineWidth\n      this.assistCtx.strokeStyle = this.config.lineColor\n      this.assistCtx.shadowColor = this.config.lineColor\n      // this.assistCtx.shadowBlur = this.config.shadowBlur\n      this.assistCtx.lineCap = this.config.lineCap\n      this.assistCtx.setLineDash(this.config.lineDash)\n    },\n    clickSquare(){\n      this.colseDropDown()\n      this.assistRef.style.cursor = \"crosshair\"\n\n      this.assistRef.onmousedown = e => {\n        let x1 = e.clientX,\n            y1 = e.clientY,\n            left = this.canvasX,\n            top = this.canvasY,\n            X = x1-left, //相对于画布，起点X\n            Y = y1-top //相对于画布，起点Y\n        //设置样式\n        this.setStyle()\n        //开始绘制\n        // this.assistCtx.beginPath()\n        this.assistCtx.moveTo(X,Y)\n\n        //bind mousemove\n        let x2,y2\n        document.onmousemove = e => {\n          x2 = e.clientX\n          y2 = e.clientY\n\n          this.assistCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)\n          this.assistCtx.beginPath()\n          this.assistCtx.rect(X,Y,x2-x1,y2-y1)\n          this.assistCtx.stroke()\n        }\n\n        document.onmouseup = () => {\n          //清空辅助画布并绘制到显示画布\n          this.assistCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)\n          this.displayCtx.strokeRect(X,Y,x2-x1,y2-y1)\n          //记录当前的状态并清理事件\n          this.recordAndClearEvents()\n          //------\n        }\n      }\n    },\n    clickCircle(){ //椭圆也可以用贝赛尔曲线绘制\n      this.colseDropDown()\n      this.assistRef.style.cursor = this.config.lineRadius50 ? this.featherCursor:'crosshair'\n\n      this.assistRef.onmousedown = e => {\n        let x1 = e.clientX,\n            y1 = e.clientY,\n            left = this.canvasX,\n            top = this.canvasY,\n            X = x1-left, //相对于画布，起点X\n            Y = y1-top //相对于画布，起点Y\n        //设置样式\n        this.setStyle()\n        //开始绘制\n        // this.assistCtx.beginPath()\n        this.assistCtx.moveTo(X,Y)\n\n        //bind mousemove\n        let w,h\n        document.onmousemove = e => {\n          w = e.clientX - x1\n          h = e.clientY - y1\n\n          this.assistCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)\n          this.assistCtx.beginPath()\n          if(this.config.lineRadius50){//模拟radius50%直线\n            this.assistCtx.ellipse(X+w/2,Y+h/2,Math.abs(w/2),this.config.lineWidth/2,0, 0, 2 * Math.PI)\n          }else{\n            this.assistCtx.ellipse(X+w/2,Y+h/2,Math.abs(w/2),Math.abs(h/2),0, 0, 2 * Math.PI) //centerx,centery,long radius,short radius,start angle,end angle\n          }\n          this.assistCtx.stroke()\n        }\n\n        document.onmouseup = () => {\n          //清空辅助画布，绘制到显示画布\n          this.assistCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)\n\n          this.displayCtx.beginPath()\n          if(this.config.lineRadius50){ //模拟radius50%直线\n            this.displayCtx.ellipse(X+w/2,Y+h/2,Math.abs(w/2),this.config.lineWidth/2,0, 0, 2 * Math.PI)\n          }else{\n            this.displayCtx.ellipse(X+w/2,Y+h/2,Math.abs(w/2),Math.abs(h/2),0, 0, 2 * Math.PI)\n          }\n          this.displayCtx.stroke()\n\n          //记录当前的状态并清理事件\n          this.recordAndClearEvents()\n          //------\n        }\n      }\n    },\n    clickArrow(){\n      this.colseDropDown()\n      this.assistRef.style.cursor = this.featherCursor\n\n      this.assistRef.onmousedown = e =>{\n        let x1 = e.clientX,\n            y1 = e.clientY,\n            left = this.canvasX,\n            top = this.canvasY,\n            X = x1-left,\n            Y = y1-top\n        //设置样式\n        this.setStyle()\n\n        //绘制过程\n        let X2,Y2,a1,b1,a2,b2,a3,b3\n        document.onmousemove = e => {\n          X2 = e.clientX - left;\n          Y2 = e.clientY - top;\n\n          //获得箭头的坐标点\n          [a1,b1,a2,b2,a3,b3] = arrowCoordinate(X,Y,X2,Y2)\n          this.assistCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight) //这行不要可以绘制散射线\n          this.assistCtx.beginPath()\n          this.assistCtx.moveTo(X,Y)\n          this.assistCtx.lineTo(X2,Y2)\n          this.assistCtx.moveTo(a2,b2)\n          this.assistCtx.lineTo(a1,b1)\n          this.assistCtx.lineTo(X2,Y2)\n          this.assistCtx.lineTo(a3,b3)\n          this.assistCtx.lineTo(a2,b2)\n          this.assistCtx.stroke()\n        }\n        document.onmouseup = () => {\n          //清空辅助画布并绘制到显示画布\n          this.assistCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)\n          this.displayCtx.beginPath()\n          this.displayCtx.moveTo(X,Y)\n          this.displayCtx.lineTo(X2,Y2)\n          this.displayCtx.moveTo(a2,b2)\n          this.displayCtx.lineTo(a1,b1)\n          this.displayCtx.lineTo(X2,Y2)\n          this.displayCtx.lineTo(a3,b3)\n          this.displayCtx.lineTo(a2,b2)\n          this.displayCtx.stroke()\n\n          //记录当前的状态并清理事件\n          this.recordAndClearEvents()\n          //------\n        }\n      }\n    },\n    clickLine(){\n      // this.colseDropDown()\n      this.assistRef.style.cursor = this.featherCursor\n      if(this.config.lineRadius50){\n        this.clickCircle()\n        return\n      }\n      this.assistRef.onmousedown = e =>{\n        let x1 = e.clientX,\n            y1 = e.clientY,\n            left = this.canvasX,\n            top = this.canvasY,\n            X = x1-left,\n            Y = y1-top\n        //设置样式\n        this.setStyle()\n\n        //绘制过程\n        let X2,Y2\n        document.onmousemove = e => {\n          X2 = e.clientX - left\n          Y2 = e.clientY - top\n\n          this.assistCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight) //这行不要可以绘制散射线\n          this.assistCtx.beginPath()\n          this.assistCtx.moveTo(X,Y)\n          this.assistCtx.lineTo(X2,Y2)\n          this.assistCtx.stroke()\n        }\n        document.onmouseup = () => {\n          //清空辅助画布并绘制到显示画布\n          this.assistCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)\n          this.displayCtx.beginPath()\n          this.displayCtx.moveTo(X,Y)\n          this.displayCtx.lineTo(X2,Y2)\n          this.displayCtx.stroke()\n\n          //记录当前的状态并清理事件\n          this.recordAndClearEvents()\n          //------\n        }\n      }\n    },\n    clickText(){\n      this.colseDropDown()\n      this.assistRef.style.cursor = \"text\"\n      this.inputText = true\n\n      this.assistRef.onmousedown = (e) => {\n        let x = e.clientX,y=e.clientY\n        const textInput = document.createElement('div')\n        textInput.className = 'textInput'\n        textInput.contentEditable = true\n        textInput.style.position = 'absolute'\n        textInput.style.left = x + 'px'\n        textInput.style.top = y + 'px'\n        textInput.style.zIndex = 9999\n        textInput.style.color = this.config.lineColor\n        textInput.style.padding = '5px'\n        textInput.style.lineHeight = this.fontSize + 'px'\n        textInput.style.fontSize = this.fontSize + 'px'\n        textInput.style.fontFamily = 'Microsoft YaHei,Sans Serif,System UI'\n        textInput.style.cursor = 'text'\n        textInput.onblur = this.textInputBlur\n        textInput.onkeydown = this.textInputKeyDown\n        this.$root.$el.appendChild(textInput)\n\n        document.onmousemove = e => {\n            textInput.style.width =  e.clientX - x + \"px\";\n            textInput.style.height =  e.clientY - y + \"px\";\n        }\n        document.onmouseup = () => {\n          textInput.focus()\n          document.onmousemove = null;\n          this.assistRef.onmousedown = null\n        }\n      }\n    },\n    clickBrush(){\n      this.colseDropDown()\n      this.assistRef.style.cursor = this.brushCursor\n\n      this.assistRef.onmousedown = e =>{\n        let x1 = e.clientX,\n            y1 = e.clientY,\n            left = this.canvasX,\n            top = this.canvasY,\n            X = x1-left,\n            Y = y1-top\n        //设置样式\n        this.setStyle()\n        //开始绘制\n        // this.displayCtx.beginPath()\n        this.displayCtx.moveTo(X,Y)\n        //绘制过程\n        document.onmousemove = e => {\n          let x2 = e.clientX,\n              y2 = e.clientY,\n              X2 = x2 - left,\n              Y2 = y2 - top\n          this.displayCtx.lineTo(X2,Y2)\n          this.displayCtx.stroke()\n        }\n      document.onmouseup = () => {\n        //记录当前的状态\n        let currentData = this.displayCtx.getImageData(0,0,this.canvasWidth,this.canvasHeight)\n        this.recordsQueue.push(currentData)\n\n        //记录当前的状态并清理事件\n        this.recordAndClearEvents()\n        //------\n      }\n      }\n    },\n    clickLineShape(){\n      this.showColorPicker = false\n      this.showLineShape = !this.showLineShape\n    },\n    clickColor(){\n      this.showLineShape = false\n      this.showColorPicker = !this.showColorPicker\n    },\n    clickRecognition(){\n      this.colseDropDown()\n    },\n    clickSave(){\n      remote.dialog.showSaveDialog(\n        {\n          title:'图片另存为',\n          defaultPath:this.$root.$data.savePath,\n          filters:[\n            {'name':'*.png',extensions:['png']},\n            {'name':'*.jpeg',extensions:['jpeg']},\n          ],\n          nameFieldLabel: new Date().toLocaleTimeString()\n        }\n      ).then(res=>{\n        const { ext } = path.parse(res.filePath)\n        let url = this.displayRef.toDataURL('image/png')\n        if (ext==='.jpeg'|| ext==='.jpg'){\n          url = this.displayRef.toDataURL('image/jpeg',1)\n        }\n        const imageData= url.replace(/^data:image\\/\\w+;base64,/, \"\");\n        const imageBuffer = new Buffer(imageData, 'base64')\n        // fs.writeFile(res.filePath, imageBuffer)\n        const writeStream = fs.createWriteStream(res.filePath,{encoding:'utf8',autoClose:true})\n        writeStream.write(imageBuffer)\n        writeStream.on('error',err=>{\n          if(err) throw err\n          if(this.$root.$data.showMessage){\n            let errNotification = new Notification(\n              '保存失败,您可能取消了操作',\n              { silent:true }\n            )\n            setTimeout(()=>{\n              errNotification.close()\n            },1500)\n          }\n          return \n        })\n      })\n    },\n    clickNo() {\n      //关闭下拉框\n      this.colseDropDown()\n      //初始化选择区域状态\n      this.$emit('initSelect')\n      //改变为适合的cursor\n      this.assistRef.style.cursor = 'move'\n      //清空画布\n      this.recordsQueue = []\n      this.displayCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight)\n      //清空文本框\n      const textInputs = document.getElementsByClassName('textInput')\n      textInputs.forEach(div=>this.$root.$el.removeChild(div))\n    },\n    clickYes(){\n      const {showMessage,playSound} = this.$root.$data\n      // 复制到clipboard\n      // let url = this.displayRef.toDataURL('image/jpeg',1)\n      // let url = document.getElementById('desktop-canvas').toDataURL('image/png')\n      let url = this.displayRef.toDataURL('image/png')\n      \n      let image = nativeImage.createFromDataURL(url)\n      clipboard.writeImage(image)\n      if(playSound) this.$refs.audio.play()\n      //显示通知\n      if(showMessage){\n        let notification = new Notification('', {\n          body: '已复制到剪贴板',\n          silent:true,\n          icon:url\n        })\n        setTimeout(()=>{\n          notification.close()\n        },1500)\n      }\n\n      //-----------\n      this.clickNo()\n      //最小化/隐藏窗口\n      remote.getCurrentWindow().minimize()\n      // remote.getCurrentWindow().hide()\n    },\n    textInputBlur(e){\n      if(!e.target.textContent) return\n\n      //暂未实现改变字体大小,用文本编辑器又没多大必要\n      let x = parseInt(e.target.style.left)-this.canvasX + 5  // padding 5px\n      let y = parseInt(e.target.style.top)-this.canvasY + 5  //\n      let divWidth = parseInt(e.target.style.width)\n      let text = e.target.innerHTML  //like: 'afaf<div><br></div><div>gagdfgsdfg</div><div>hdfhh</div>'\n\n      let rows = []\n      text.split('<div>').forEach(row => (\n        rows.push(row.replace(/<\\/div>/g,'').replace(/<br>/g,'').replace(/&nbsp;/g,''))\n        )\n      )\n\n      let totalLength = this.displayCtx.measureText(rows[0]).width //第一行\n      let n = Math.ceil(totalLength/divWidth) //回车之前的文字行数\n      let words = Math.ceil((divWidth-10-4)/(this.fontSize+4)) //一行大约多少字符,width:padding 5 border 2 / 字体宽度+间距\n\n      this.displayCtx.font = `${this.fontSize}px 黑体,Microsoft YaHei,Sans Serif,System UI`\n      // this.displayCtx.strokeStyle = this.config.lineColor\n      this.displayCtx.fillStyle = this.config.lineColor\n      this.displayCtx.lineWidth = this.config.lineWidth\n      let lineGap = 1 //\n      rows.forEach((row,index)=>{\n        if(index===0){\n          for(let i=0;i<n;i++){\n            let txt = ''\n            for(let j in row){\n              if(j>=i*words && j< (i+1)*words){\n                txt+=row[j]\n              }\n            }\n            // this.displayCtx.strokeText(txt,x,y+(this.fontSize+lineGap)*i)\n            this.displayCtx.fillText(txt,x,y+(this.fontSize+lineGap)*i)\n            txt = ''\n          }\n        }else{\n          // this.displayCtx.strokeText(row,x,y+(this.fontSize+lineGap)*(n+index))\n          this.displayCtx.fillText(row,x,y+(this.fontSize+lineGap)*(n+index))\n        }\n      })\n\n      //移除dom元素\n      this.$root.$el.removeChild(e.target)\n      //记录当前状态\n      let currentData = this.displayCtx.getImageData(0,0,this.canvasWidth,this.canvasHeight)\n      this.recordsQueue.push(currentData)\n    },\n    textInputKeyDown(e){\n      if((e.target.innerHTML==='' && e.keyCode===8)){ //backspace\n        this.$root.$el.removeChild(e.target)\n      }\n      if(e.keyCode===46){ //del\n        e.target.innerHTML = ''\n        this.$root.$el.removeChild(e.target)\n      }\n    }\n  },\n}\n</script>\n\n<style lang='less' scoped>\n#toolbar{\n  z-index: 999;\n  .btn-group {\n    button {\n      padding: 5px 7.5px;\n      margin:0px;\n      span {\n        display: inline-block;\n        transform: scale(1.5);\n        &:hover{\n          transform: scale(1.8);\n          transition: all 0.3s;\n        }\n      }\n    }\n  }\n}\n\n#colorpicker{\n  z-index: 9999;\n  position: absolute;\n  left:-55px;\n  background: #6c757d;\n  width: 220px !important;\n}\n\n.tooltip{\n  z-index: -1;\n}\n\n#lineshape-button{\n  .lineshape-content{\n    position:absolute;\n    // top:40px;\n    left:-30px;\n    ul{\n      background: #6c757d;\n      list-style: none;\n      padding: 0px;\n      width:150px;\n      height: 10%;\n      min-height: 140px;\n      li{\n        padding: 10px;\n        &:nth-child(1){\n          padding-top: 20px;\n        }\n        &:nth-child(2){\n          padding: 0px;\n          hr{\n            margin: 0px;\n            width:75%;\n          }\n        }\n      }\n      .radius-line{\n        width:100px;\n        height: 0px;\n        border:none;\n        border-bottom:6px #fff solid;\n        border-radius: 3px;\n      }\n      .radius50-line{\n        width:100px;\n        height: 0px;\n        border:none;\n        border-bottom:6px #fff solid;\n        border-radius: 50%;\n      }\n      .solid-line{\n        width:100px;\n        height: 0px;\n        border: none;\n        border-bottom:6px #fff solid;\n      }\n      .dash-line{\n        width:100px;\n        height: 0px;\n        border:none;\n        border-bottom:3px #fff dashed;\n      }\n    }\n\n\n    //\n    .line-width{\n      position: absolute;\n      top:6%;\n      right:2%;\n      font-size: 14px;\n    }\n    .range-input{\n      position: absolute;\n      transform: rotate(90deg);\n      top:48%;\n      left:55%;\n      width:65%;\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ToolBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ToolBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToolBar.vue?vue&type=template&id=438261b8&scoped=true&\"\nimport script from \"./ToolBar.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolBar.vue?vue&type=style&index=0&id=438261b8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"438261b8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"colortip\"}},[_c('div',{style:(_vm.tipboardStyle),attrs:{\"id\":\"tipboard\"}},[_c('ul',[_c('li',[_c('span',[_vm._v(\"x :\")]),_vm._v(_vm._s(_vm.left)+\" \"),_c('span',{staticStyle:{\"padding-left\":\"20px\"}},[_vm._v(\"y :\")]),_vm._v(_vm._s(_vm.top)+\" \")]),_c('li',[_c('span',{style:({textDecoration:_vm.switchColor? 'none':'underline rgba(241,90,39,255)'})},[_vm._v(\"hex :\")]),_c('span',{style:({color:_vm.hex})},[_vm._v(_vm._s(_vm.hex))])]),_c('li',[_c('span',{style:({textDecoration:_vm.switchColor? 'underline rgba(241,90,39,255)':'none'})},[_vm._v(\"rgba:\")]),_c('span',{style:({color:'rgba'+ _vm.rgba})},[_vm._v(_vm._s(_vm.rgba))])]),_c('li',[_c('span',[_vm._v(\"按c复制 shift切换\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasCopy),expression:\"hasCopy\"}]},[_vm._v(\"已复制\")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const RGB2Hex = (color)=>{\n  let values = color\n    .replace(/rgba?\\(/, '')\n    .replace(/\\)/, '')\n    .replace(/[\\s+]/g, '')\n    .split(',');\n  let a = parseFloat(values[3] || 1),\n      r = Math.floor(a * parseInt(values[0]) + (1 - a) * 255),\n      g = Math.floor(a * parseInt(values[1]) + (1 - a) * 255),\n      b = Math.floor(a * parseInt(values[2]) + (1 - a) * 255);\n  return \"#\" +\n    (\"0\" + r.toString(16)).slice(-2) +\n    (\"0\" + g.toString(16)).slice(-2) +\n    (\"0\" + b.toString(16)).slice(-2);\n}\n\nexport default RGB2Hex\n","<template>\n  <div id='colortip'>\n    <div id=\"tipboard\" :style=\"tipboardStyle\">\n      <ul>\n        <li>\n          <span>x :</span>{{left}}\n          <span style=\"padding-left:20px\">y :</span>{{top}}\n        </li>\n        <li >\n          <span :style=\"{textDecoration:switchColor? 'none':'underline rgba(241,90,39,255)'}\">hex :</span>\n          <span :style='{color:hex}'>{{hex}}</span>\n        </li>\n        <li>\n          <span :style=\"{textDecoration:switchColor? 'underline rgba(241,90,39,255)':'none'}\">rgba:</span>\n          <span :style=\"{color:'rgba'+ rgba}\">{{rgba}}</span>\n        </li>\n        <li>\n          <span>按c复制 shift切换</span>\n          <span v-show=\"hasCopy\">已复制</span>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport RGB2HEX from '../utils/RGB2HEX'\n\nexport default {\n  data(){\n    return {\n      left:0,\n      top:0,\n      hex:'#000000',\n      rgba:'(0,0,0,0)',\n      switchColor:false,\n      hasCopy:false,\n      themeDark:this.$root.$data.theme==='dark'\n    }\n  },\n  computed:{\n    tipboardStyle(){\n      let top,left\n      if(this.left>180){\n        top = this.top - 50 + 'px'\n        left = this.left - 220 + 'px'\n      }else{\n        left = this.left + 30 + 'px'\n        top = this.top-50 +'px'\n      }\n      let background = this.themeDark? \"#6c757d\":\"#fff\"\n      let color = this.themeDark? \"#fff\":'#6c757d'\n      return {\n        position:'absolute',\n        border: `2px ${this.hex} dashed`,\n        background,\n        color,\n        left,\n        top\n      }\n    }\n  },\n  mounted(){\n    //获得实时像素\n    const mask = document.getElementById('mask')\n    const desktopCanvas = document.getElementById('desktop-canvas')\n    let desktopCtx = desktopCanvas.getContext('2d')\n\n    mask.onmousemove = e =>{\n      this.left = e.clientX\n      this.top = e.clientY\n      let pixel = desktopCtx.getImageData(this.left,this.top,1,1)\n      let r = pixel.data[0],\n          g = pixel.data[1],\n          b = pixel.data[2],\n          a = pixel.data[3]\n      this.rgba = `(${r},${g},${b},${a})`\n      this.hex = RGB2HEX('rgba'+this.rgba)\n    }\n\n    //绑定复制颜色事件\n    document.onkeydown = e => {\n      if(this.isCapture){\n        return false\n      }\n      if(e.keyCode===16){\n        this.switchColor = !this.switchColor\n      }\n      if(e.keyCode===67){ //按C复制\n        this.hasCopy = true\n        let copyColor = this.switchColor? 'rgba'+this.rgba:this.hex\n        navigator.clipboard.writeText(copyColor)\n\n        setTimeout(() => {\n          if(this.hasCopy){\n            this.hasCopy = false\n          }\n        }, 2000);\n      }\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n#colortip{\n  pointer-events: none;\n  #tipboard{\n    z-index: 1;\n    background:#6c757d;\n    color: #fff;\n    border:1px #fff dashed;\n    ul{\n      list-style: none;\n      padding: 5px;\n      margin: 0px;\n      z-index: 0;\n      li{\n        span:nth-child(1){\n          padding-right: 5px;\n          font-weight: bold;\n        }\n      }\n      li:last-child{\n        font-size:11px;\n        padding-top: 5px;\n        span:nth-child(2){\n          font-weight: bold;\n          color: rgba(241,90,39,255);\n          padding-left:10px\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ColorTip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ColorTip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ColorTip.vue?vue&type=template&id=70b686e7&scoped=true&\"\nimport script from \"./ColorTip.vue?vue&type=script&lang=js&\"\nexport * from \"./ColorTip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ColorTip.vue?vue&type=style&index=0&id=70b686e7&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70b686e7\",\n  null\n  \n)\n\nexport default component.exports","import { remote,desktopCapturer } from 'electron'\n\nconst { id,size } = remote.screen.getPrimaryDisplay() //workAreaSize >= size,前者包含屏幕左右的黑边框\n\n//解决canvas渲染模糊\n export const setCanvas = (canvas,width,height)=>{\n  let ctx = canvas.getContext('2d')\n  let backingStorePixelRatio = ctx.backingStorePixelRatio ||\n  ctx.webkitBackingStorePixelRatio ||\n  ctx.mozBackingStorePixelRatio ||\n  ctx.msBackingStorePixelRatio ||\n  ctx.oBackingStorePixelRatio ||\n  ctx.backingStorePixelRatio || 1\n  \n  const pixelRatio = (window.devicePixelRatio || 1)/backingStorePixelRatio //获得屏幕像素比，进行缩放，否则绘制会出现模糊\n  canvas.width = width * pixelRatio //相应缩放画布\n  canvas.height = height * pixelRatio \n  ctx.scale(pixelRatio,pixelRatio)\n\n  canvas.style.width = width + 'px'//实际按照屏幕大小绘制\n  canvas.style.height = height +'px'\n  \n  return ctx\n}\n\n\nexport const captureScreen = () => {\n  // if(process.platform==='win32'){\n    desktopCapturer.getSources(\n      { types: ['screen'],thumbnailSize:{width:0,height:0}}\n    ).then(async sources => {\n      for (let source of sources) {\n        // console.log(typeof source.display_id) //坑\n        // console.log(typeof id) //坑\n        if (source.display_id === id.toString()) {\n          const stream = await navigator.mediaDevices.getUserMedia({\n            audio: false,\n            video: {\n              mandatory: {\n                chromeMediaSource: 'desktop',\n                chromeMediaSourceId: source.id,\n                minWidth: size.width,\n                maxWidth: size.width,\n                minHeight: size.height,\n                maxHeight: size.height\n              }\n            }\n          })\n          handleStream(stream)\n        }\n      }\n    })\n\n//   } else {\n//     navigator.mediaDevices.getUserMedia({\n//       audio: false,\n//       video: {\n//         mandatory: {\n//           chromeMediaSource: 'desktop',\n//           // chromeMediaSourceId: source.id, //我的windows和linux要了这行都会出现NotReadableError,去掉\n//           minWidth: size.width,\n//           maxWidth: size.width,\n//           minHeight: size.height,\n//           maxHeight: size.height,\n//         },\n//         cursor:'none' //???\n//       }\n//     }).then( stream => handleStream(stream))\n//   }\n}\n\n\nconst handleStream = (stream) => {\n  const video = document.getElementById('video')\n  video.srcObject = stream\n  video.onloadedmetadata = () => {\n    video.play()\n    \n    let canvas = document.getElementById('desktop-canvas')\n    canvas.width = size.width\n    canvas.height = size.height\n    canvas.style.width = size.width+'px'//实际按照屏幕大小绘制\n    canvas.style.height = size.height+'px'\n    \n    const ctx = canvas.getContext('2d')\n\n    // ctx.drawImage(video,0, 0)\n    ctx.clearRect(0,0,size.width,size.height)\n    createImageBitmap(video).then(bmp => { //转为bitmap，可以提高性能，降低canvas渲染延迟\n      // ctx.imageSmoothingEnabled = false;\n      ctx.drawImage(bmp, 0, 0) //startX,startY,width,height  in canvas\n      stream.getTracks()[0].stop() //关闭视频流，序号是反向的，此处只有一个所以是0\n      \n      // 移除video元素\n      // document.getElementById('app').removeChild(video)\n    })\n  }\n}\n","<template>\n  <div id=\"layout\">\n    <div id=\"mask\"\n      @mousedown=\"onSelectRegion\"\n      :style=\"{cursor: completeSelectRegion? 'default':'crosshair'}\">\n    </div>\n\n<!-- caputure region -->\n    <div id=\"captureRegion\"\n      :style=\"captureRegionStyle\"\n      v-show=\"isCapture\">\n    </div>\n\n<!-- 两个canvas，一个主显示，一个主辅助 -->\n      <!-- canvas: mouseup时设置 -->\n      <!-- :width=\"canvasWidth\"\n      :height=\"canvasHeight\" -->\n      <!-- style: mouseup时设置 -->\n      <!-- width:canvasWidth+'px',\n      height:canvasHeight+'px', -->\n    <canvas id='display-canvas'\n      ref='display'\n      v-show=\"completeSelectRegion\"\n      :style=\"{\n        position:'absolute',\n        left:canvasX+'px',\n        top:canvasY+'px',\n        zIndex:999,\n        pointerEvents:'none'}\"\n      >\n    </canvas>\n\n    <!-- width/height：同上 -->\n    <canvas id='assist-canvas'\n      ref='assist'\n      v-show=\"completeSelectRegion\"\n      :style=\"{\n        position:'absolute',\n        left:canvasX+'px',\n        top:canvasY+'px',\n        zIndex:999,\n        cursor:'move'}\"\n      @mousedown=\"onDrag\">\n    </canvas>\n\n\n<!-- 工具条 -->\n    <ToolBar\n      @initSelect=\"initSelect()\"\n      @closeDrag=\"canDrag=false\"\n      v-position=\"{x,y,width,height}\"\n      v-show=\"completeSelectRegion\"\n      :toolbarBottom=\"toolbarBottom\"\n      :canvasProps=\"{canvasX,canvasY,canvasWidth,canvasHeight}\"\n      :clipDesktop=\"clipDesktop\"\n    />\n<!-- 颜色、位置提示框 -->\n    <ColorTip v-show=\"!isCapture\" v-if=\"showColorTip\"/>\n<!-- 桌面捕获 -->\n    <video id=\"video\"></video>\n    <canvas id=\"desktop-canvas\" ref='desktop'></canvas>\n  </div>\n</template>\n\n\n<script>\nimport ToolBar from \"./components/ToolBar\";\nimport ColorTip from './components/ColorTip'\nimport { captureScreen,setCanvas} from \"./utils/captureScreen\";\nimport {ipcRenderer} from 'electron'\n\nipcRenderer.on('flushDesktopCapture',()=>captureScreen()) //F1\n\nexport default {\n  name: \"app\",\n  components: {\n    ToolBar,\n    ColorTip\n  },\n  data() {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      // pixelRatio:window.devicePixelRatio,\n\n      isCapture: false,\n      completeSelectRegion: false,\n      canDrag: true,\n\n      captureRegionStyle: {\n        position: \"absolute\",\n        zIndex: 99,\n        // cursor:'move',\n        background:'rgba(0,0,0,0)',\n        draggable: false,\n        borderWidth:'2px',\n        borderColor:this.$root.$data.captureColor,\n        borderStyle:'solid',\n        boxShadow: \"0px 0px 2px 2px rgba(85, 80, 80, 0.3)\",\n        left: \"0px\", // =this.x\n        top: \"0px\", // = this.y\n        width: \"0px\", //this.width\n        height: \"0px\" //this.height\n      },\n\n      showColorTip: this.$root.$data.showColorTip\n    };\n  },\n  mounted(){\n    captureScreen()\n  },\n  computed:{\n    toolbarBottom(){ //传给子组件，给colorpicker定位\n      return  this.$root.$data.screenHeight - (this.y+this.height+60+40)\n    },\n    canvasX(){\n      return this.x+parseInt(this.captureRegionStyle.borderWidth)\n    },\n    canvasY(){\n      return this.y+parseInt(this.captureRegionStyle.borderWidth)\n    },\n    canvasWidth(){\n      let width = this.width - 2*parseInt(this.captureRegionStyle.borderWidth)\n      return width>0? width:0\n    },\n    canvasHeight(){\n      let height = this.height - 2*parseInt(this.captureRegionStyle.borderWidth)\n      return height>0? height:0\n    }\n  },\n  methods: {\n    clipDesktop(){\n      let desktop = this.$refs.desktop\n      const ctx = this.$refs.display.getContext('2d')\n      ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight)\n      ctx.drawImage(\n        desktop,\n        this.canvasX,this.canvasY,this.canvasWidth,this.canvasHeight,\n        0,0,this.canvasWidth,this.canvasHeight\n      )\n      ctx.globalCompositeOperation = \"source-over\"\n    },\n    initSelect() {\n      //每次选择区域前初始化选区状态,也就是\"取消\"工具按钮作用\n      this.completeSelectRegion = false;\n      this.isCapture = false;\n      this.canDrag = true;\n      this.captureRegionStyle.left = '0px';\n      this.captureRegionStyle.top = '0px';\n      this.captureRegionStyle.width = '0px';\n      this.captureRegionStyle.height = '0px';\n    },\n    onSelectRegion(e) {\n      //鼠标按下开始截图\n      if (this.completeSelectRegion) {\n        return false;\n      } //选区成功后，不可再点击，除非点击\"取消\"重新选\n\n      // if(this.showPixelCanvas){\n      //   return false\n      // } //像素查看时，不可进行截图选取\n\n      this.initSelect();\n      this.x = e.clientX;\n      this.y = e.clientY;\n      this.captureRegionStyle.left = this.x + \"px\";\n      this.captureRegionStyle.top = this.y + \"px\";\n\n      document.onmousemove = e => {\n\n        const width = e.clientX - this.x; //可能反向选区,就为负数\n        const height = e.clientY - this.y;\n\n        // 判断是否是在截图，而不是纯粹点击鼠标等普通操作\n        this.isCapture = width > 15; //width<0是反向选区，但反向选区遇到bug，尚未解决\n        if (this.isCapture) {\n          //是在截图进行选区,更新宽高\n          this.width = width;\n          this.height = height;\n          this.captureRegionStyle.width = this.width + \"px\";\n          this.captureRegionStyle.height = this.height + \"px\";\n        }\n      }\n      document.onmouseup = () => { //BUG:偶尔丢失mouseup事件，我鼠标问题吗？\n        //放开鼠标，清除移动事件，生成选区\n        document.onmousemove = null;\n        this.completeSelectRegion = this.canDrag = this.isCapture;\n        \n        //-------设置宽高、清空画布都会使canvas状态清空，所以在这里处理高dpi模糊问题\n        setCanvas(this.$refs.display,this.canvasWidth,this.canvasHeight)\n        setCanvas(this.$refs.assist,this.canvasWidth,this.canvasHeight)\n        //-------\n        this.clipDesktop()\n      }\n    },\n\n    onDrag(e) {\n      if (this.completeSelectRegion && this.canDrag) {\n        // 鼠标点击物体那一刻相对于物体左侧边框的距离=点击时的位置相对于浏览器\n        // 最左边的距离-物体左边框相对于浏览器最左边的距离，纵向同理\n        const leftWidth = e.clientX - this.x;\n        const topHeight = e.clientY - this.y;\n\n        document.onmousemove = e => {\n          this.completeSelectRegion = false; //移动时意味着重新选区，未完成选区隐藏工具条\n\n          // 控制拖拽物体的范围只能在浏览器视窗内，不允许出现滚动条或拖出可视区域\n          let posX = e.clientX - leftWidth;\n          let posY = e.clientY - topHeight;\n\n          if (posX < 0) {\n            posX = 0;\n          } else if (posX > document.body.clientWidth - this.width) {\n            posX = document.body.clientWidth - this.width;\n          }\n\n          if (posY < 0) {\n            posY = 0;\n          } else if (posY > document.body.clientHeight - this.height) {\n            posY = document.body.clientHeight - this.height;\n          }\n\n          //拖动\n          this.x = posX;\n          this.y = posY;\n          this.captureRegionStyle.left = this.x + \"px\";\n          this.captureRegionStyle.top = this.y + \"px\";\n        }\n\n        document.onmouseup = () => {\n          // 鼠标抬起时不再移动\n          // 预防鼠标弹起来后还会循环（即预防鼠标放上去的时候还会移动）\n          document.onmousemove = null;\n          this.completeSelectRegion = true; //重新选取完成，显示工具条\n\n          //-------设置宽高、清空画布都会使canvas状态清空，所以在这里处理高dpi模糊问题\n          setCanvas(this.$refs.display,this.canvasWidth,this.canvasHeight)\n          setCanvas(this.$refs.assist,this.canvasWidth,this.canvasHeight)\n          //------\n          this.clipDesktop()\n        };\n      }\n    }\n  },\n  directives: {\n    position: function(el, binding) {\n      //bind + update\n      let { x, y, width, height } = binding.value;\n      const { clientWidth, clientHeight } = document.body;\n      const toolbarLength = 575;\n      const toolbarHeight = 40;\n      const isBeyondLeft = (toolbarLength - width) / 2 > x; //左边碰壁了\n      const isBeyondRight =\n        (toolbarLength - width) / 2 > clientWidth - x - width; //右边碰壁了\n      const isBeyondBottom =\n        toolbarHeight + 20 > clientHeight - y - height; //下边碰壁了\n\n      el.style.position = \"absolute\";\n      el.style.zIndex = 999;\n      el.style.left = isBeyondLeft\n        ? \"10px\"\n        : isBeyondRight\n        ? clientWidth - toolbarLength - 20 + \"px\"\n        : x + width / 2 - toolbarLength / 2 + \"px\";\n      el.style.top = isBeyondBottom\n        ? y - 60 + \"px\"\n        : y + height + 40 + \"px\";\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\nhtml,\nbody {\n  width: 100%;\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n  box-sizing: border-box;\n  overflow: hidden;\n  background: rgba(0, 0, 0, 0.3); //关键在这里，调试时发现是#fff\n}\n#app,#layout {\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  // background: rgba(0, 0, 0, 0.1);\n}\n#mask {\n  // background: rgba(0, 0, 0, 0.1);\n  width: 100%;\n  height: 100%;\n  z-index: 99;\n}\n\n#desktop-canvas,\n#video {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  z-index: -999;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  visibility: hidden;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=139ac418&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport { BootstrapVue, IconsPlugin } from 'bootstrap-vue'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n\nimport { remote } from 'electron'\nimport Store from 'electron-store'\n\n\nVue.use(BootstrapVue)\nVue.use(IconsPlugin)\n\nVue.config.productionTip = false\n\nconst store = new Store({name:'settings'})\n\nconst {\n  width: screenWidth,\n  height: screenHeight,\n} = remote.screen.getPrimaryDisplay().size\n\nnew Vue({\n  data() {\n    return {\n      screenWidth,\n      screenHeight,\n      theme:store.get('theme') || 'dark',\n      showColorTip: store.get('showColorTip'),\n      showMessage: store.get('showMessage'),\n      savePath: store.get('savePath') || remote.app.getPath('pictures'),\n      playSound: store.get('playSound'),\n      captureColor: store.get('captureColor') || \"#ffffff\",\n    }\n  },\n  render: h => h(App),\n}).$mount('#app')\n","module.exports = __webpack_public_path__ + \"img/brush.03c8929f.svg\";","module.exports = __webpack_public_path__ + \"media/iphone.abfdd1df.mp3\";","module.exports = require(\"events\");"],"sourceRoot":""}