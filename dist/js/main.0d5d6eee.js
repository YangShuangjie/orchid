(function(t){function e(e){for(var s,a,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);h&&h(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,r=1;r<i.length;r++){var c=i[r];0!==o[c]&&(s=!1)}s&&(n.splice(e--,1),t=a(a.s=i[0]))}return t}var s={},o={main:0},n=[];function a(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var h=c;n.push(["be94","chunk-vendors"]),i()})({2395:function(t,e,i){},"34bb":function(t,e){t.exports=require("electron")},"3c93":function(t,e){t.exports=require("crypto")},"42cd":function(t,e){t.exports=require("assert")},6481:function(t,e,i){"use strict";var s=i("a640"),o=i.n(s);o.a},6903:function(t,e,i){t.exports=i.p+"img/feather.5a7f4448.svg"},"7c55":function(t,e,i){"use strict";var s=i("2395"),o=i.n(s);o.a},"8cad":function(t,e){t.exports=require("util")},"8e57":function(t,e){t.exports=require("os")},"9b0f":function(t,e){t.exports=require("fs")},a32b:function(t,e){t.exports=require("path")},a5fe:function(t,e,i){},a640:function(t,e,i){},b087:function(t,e){t.exports=require("worker_threads")},be76:function(t,e,i){"use strict";var s=i("a5fe"),o=i.n(s);o.a},be94:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"layout"}},[i("div",{style:{cursor:t.completeSelectRegion?"default":"crosshair"},attrs:{id:"mask"},on:{mousedown:t.onSelectRegion}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isCapture,expression:"isCapture"}],style:t.captureRegionStyle,attrs:{id:"captureRegion"}}),i("canvas",{directives:[{name:"show",rawName:"v-show",value:t.completeSelectRegion,expression:"completeSelectRegion"}],ref:"display",style:{position:"absolute",left:t.canvasX+"px",top:t.canvasY+"px",zIndex:999,pointerEvents:"none"},attrs:{id:"display-canvas"}}),i("canvas",{directives:[{name:"show",rawName:"v-show",value:t.completeSelectRegion,expression:"completeSelectRegion"}],ref:"assist",style:{position:"absolute",left:t.canvasX+"px",top:t.canvasY+"px",zIndex:999,cursor:"move"},attrs:{id:"assist-canvas"},on:{mousedown:t.onDrag}}),i("ToolBar",{directives:[{name:"position",rawName:"v-position",value:{x:t.x,y:t.y,width:t.width,height:t.height},expression:"{x,y,width,height}"},{name:"show",rawName:"v-show",value:t.completeSelectRegion,expression:"completeSelectRegion"}],attrs:{toolbarBottom:t.toolbarBottom,canvasProps:{canvasX:t.canvasX,canvasY:t.canvasY,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight},clipDesktop:t.clipDesktop},on:{initSelect:function(e){return t.initSelect()},closeDrag:function(e){t.canDrag=!1}}}),t.showColorTip?i("ColorTip",{directives:[{name:"show",rawName:"v-show",value:!t.isCapture,expression:"!isCapture"}]}):t._e(),i("canvas",{ref:"desktop",style:{visibility:t.win32?"hidden":"visible"},attrs:{id:"desktop-canvas"}}),i("video",{attrs:{id:"video"}})],1)},n=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"toolbar"}},[i("b-button-group",{on:{click:function(e){return t.$emit("closeDrag")}}},[i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"orchid-button"}},[i("span",[t._v("üå∏")])]),i("b-tooltip",{attrs:{triggers:"focus",target:"undo-button",title:"Êí§ÈîÄ"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"undo-button"},on:{click:t.clickUndo}},[i("span",[i("b-icon",{attrs:{icon:"reply-fill","flip-h":""}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"redo-button",title:"ÊÅ¢Â§ç"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"redo-button"},on:{click:t.clickRedo}},[i("span",[i("b-icon",{attrs:{icon:"reply-fill"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"square-button",title:"Áü©ÂΩ¢"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"square-button"},on:{click:t.clickSquare}},[i("span",[i("b-icon",{attrs:{icon:"square"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"circle-button",title:"ÂúÜÂΩ¢"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"circle-button"},on:{click:t.clickCircle}},[i("span",[i("b-icon",{attrs:{icon:"circle"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"arrow-button",title:"ÁÆ≠Â§¥"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"arrow-button"},on:{click:t.clickArrow}},[i("span",[i("b-icon",{attrs:{icon:"arrow-right"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"line-button",title:"Áõ¥Á∫ø"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"line-button"},on:{click:t.clickLine}},[i("span",[i("b-icon",{attrs:{icon:"dash"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"text-button",title:"ÊñáÊú¨"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"text-button"},on:{click:t.clickText}},[i("span",[i("b-icon",{attrs:{icon:"fonts"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"brush-button",title:"Ê∂ÇÈ∏¶"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"brush-button"},on:{click:t.clickBrush}},[i("span",[i("b-icon",{attrs:{icon:"brush"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"lineshape-button",title:"Á∫øÂûã"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"lineshape-button"}},[i("span",{on:{click:t.clickLineShape}},[i("b-icon",{attrs:{icon:"list"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLineShape,expression:"showLineShape"}],staticClass:"lineshape-content",style:{top:t.toolbarBottom>160?"40px":"-143px"}},[i("ul",{style:{background:t.themeDark?"#6c757d":"#fff"}},[i("li",[i("div",{style:t.selectLineStyle}),i("p",{staticClass:"line-width"},[t._v(t._s(t.config.lineWidth+"px"))])]),i("li",[i("hr")]),i("li",{attrs:{"data-shape":"radius"},on:{click:t.changeLineShape}},[i("div",{staticClass:"radius-line",style:{borderColor:t.themeDark?"#fff":"#000"}})]),i("li",{attrs:{"data-shape":"radius50"},on:{click:t.changeLineShape}},[i("div",{staticClass:"radius50-line",style:{borderColor:t.themeDark?"#fff":"#000"}})]),i("li",{attrs:{"data-shape":"solid"},on:{click:t.changeLineShape}},[i("div",{staticClass:"solid-line",style:{borderColor:t.themeDark?"#fff":"#000"}})]),i("li",{attrs:{"data-shape":"dashed"},on:{click:t.changeLineShape}},[i("div",{staticClass:"dash-line",style:{borderColor:t.themeDark?"#fff":"#000"}})])]),i("b-form-input",{staticClass:"range-input",attrs:{type:"range",min:"0",max:"40",size:"sm"},model:{value:t.config.lineWidth,callback:function(e){t.$set(t.config,"lineWidth",e)},expression:"config.lineWidth"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"color-button",title:"È¢úËâ≤","custom-class":"tooltip"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"color-button"}},[i("span",{on:{click:t.clickColor}},[i("b-icon",{attrs:{icon:"pen"}})],1),i("ColorPicker",{directives:[{name:"show",rawName:"v-show",value:t.showColorPicker,expression:"showColorPicker"}],style:{top:t.toolbarBottom>380?"40px":"-345px",background:t.themeDark?"#6c757d":"#fff"},attrs:{id:"colorpicker",color:t.config.lineColor},on:{changeColor:t.changeColor}})],1),i("b-tooltip",{attrs:{triggers:"focus",target:"recognition-button",title:"ËØÜÂà´"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"recognition-button"},on:{click:t.clickRecognition}},[i("span",[i("b-icon",{attrs:{icon:"camera"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"save-button",title:"Âè¶Â≠ò"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"save-button"},on:{click:t.clickSave}},[i("span",[i("b-icon",{attrs:{icon:"download"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"no-button",title:"ÂèñÊ∂à"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"no-button"},on:{click:t.clickNo}},[i("span",[i("b-icon",{attrs:{icon:"x"}})],1)]),i("b-tooltip",{attrs:{triggers:"focus",target:"yes-button",title:"Á°ÆÂÆö"}}),i("b-button",{attrs:{variant:t.themeDark?"secondary":"light",id:"yes-button"},on:{click:t.clickYes}},[i("span",[i("b-icon",{attrs:{icon:"check"}})],1)])],1),i("audio",{ref:"audio",attrs:{src:t.mp3path}})],1)},r=[],c=(i("99af"),i("4160"),i("a9e3"),i("ac1f"),i("5319"),i("1276"),i("159b"),i("3835")),l=i("c3c0"),h=i.n(l),u=i("6903"),d=i.n(u),p=i("fd5c"),f=i.n(p),g=i("fc84"),v=function(t,e,i,s){var o=20,n=12,a=Math.PI/12,r=Math.atan2(s-e,i-t),c=i-o*Math.sin(Math.PI/2-r-a),l=s-o*Math.cos(Math.PI/2-r-a),h=i-n*Math.cos(r),u=s-n*Math.sin(r),d=i-o*Math.cos(r-a),p=s-o*Math.sin(r-a);return[c,l,h,u,d,p]},m=i("34bb"),b=i("9b0f"),x=i.n(b),y=i("a32b"),C=i.n(y),w={props:{toolbarBottom:Number,canvasProps:Object,clipDesktop:Function},components:{ColorPicker:g["a"]},data:function(){return{showColorPicker:!1,showLineShape:!1,inputText:!1,fontSize:16,themeDark:"dark"===this.$root.$data.theme,featherCursor:"url(".concat(d.a,") 0 30,default"),brushCursor:"url(".concat(h.a,") 0 30,default"),mp3path:f.a,config:{lineWidth:2,lineColor:"#6EFF2A",lineCap:"round",lineDash:[0,0],lineRadius50:!1,lineShape:"solid",radius:"0px"},recordsQueue:[0]}},computed:{selectLineStyle:function(){return{width:"100px",height:"0px",border:"none",borderBottom:this.config.lineWidth+"px "+this.config.lineColor+" "+this.config.lineShape,borderRadius:this.config.radius}},canvasX:function(){return this.canvasProps.canvasX},canvasY:function(){return this.canvasProps.canvasY},canvasWidth:function(){return this.canvasProps.canvasWidth},canvasHeight:function(){return this.canvasProps.canvasHeight}},mounted:function(){var t=this;this.displayRef=document.getElementById("display-canvas"),this.displayCtx=this.displayRef.getContext("2d"),this.assistRef=document.getElementById("assist-canvas"),this.assistCtx=this.assistRef.getContext("2d"),m["ipcRenderer"].on("pressESC",(function(){return t.clickNo()}))},methods:{changeColor:function(t){var e=t.rgba,i=e.r,s=e.g,o=e.b,n=e.a;this.config.lineColor="rgba(".concat(i,", ").concat(s,", ").concat(o,", ").concat(n,")")},changeLineShape:function(t){this.config.lineRadius50=!1;var e=t.target.dataset.shape;switch(e){case"solid":this.config.lineCap="butt",this.config.lineShape="solid",this.config.radius="0px",this.config.lineDash=[0,0];break;case"radius":this.config.lineCap="round",this.config.lineShape="solid",this.config.radius=this.config.lineWidth/2+"px",this.config.lineDash=[0,0];break;case"radius50":this.config.lineRadius50=!0,this.config.lineShape="solid",this.config.radius="50%",this.config.lineDash=[0,0],this.clickLine();break;case"dashed":this.config.lineDash=[12,10],this.config.lineShape="dashed",this.config.radius="0px";break}},colseDropDown:function(){this.showColorPicker=this.showLineShape=!1},clickUndo:function(){this.colseDropDown();var t=this.recordsQueue.pop();if(t){this.recordsQueue.unshift(t);var e=this.recordsQueue[this.recordsQueue.length-1];e?this.displayCtx.putImageData(e,0,0):this.clipDesktop()}else this.recordsQueue.push(t)},clickRedo:function(){this.colseDropDown();var t=this.recordsQueue.shift();t?(this.displayCtx.putImageData(t,0,0),this.recordsQueue.push(t)):this.recordsQueue.unshift(t)},recordAndClearEvents:function(){var t=this.displayCtx.getImageData(0,0,this.canvasWidth,this.canvasHeight);this.recordsQueue.push(t),document.onmousemove=null,document.onmouseup=null},setStyle:function(){this.displayCtx.lineWidth=this.config.lineWidth,this.displayCtx.strokeStyle=this.config.lineColor,this.displayCtx.shadowColor=this.config.lineColor,this.displayCtx.lineCap=this.config.lineCap,this.displayCtx.setLineDash(this.config.lineDash),this.assistCtx.lineWidth=this.config.lineWidth,this.assistCtx.strokeStyle=this.config.lineColor,this.assistCtx.shadowColor=this.config.lineColor,this.assistCtx.lineCap=this.config.lineCap,this.assistCtx.setLineDash(this.config.lineDash)},clickSquare:function(){var t=this;this.colseDropDown(),this.assistRef.style.cursor="crosshair",this.assistRef.onmousedown=function(e){var i,s,o=e.clientX,n=e.clientY,a=t.canvasX,r=t.canvasY,c=o-a,l=n-r;t.setStyle(),t.assistCtx.moveTo(c,l),document.onmousemove=function(e){i=e.clientX,s=e.clientY,t.assistCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.assistCtx.beginPath(),t.assistCtx.rect(c,l,i-o,s-n),t.assistCtx.stroke()},document.onmouseup=function(){t.assistCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.displayCtx.strokeRect(c,l,i-o,s-n),t.recordAndClearEvents()}}},clickCircle:function(){var t=this;this.colseDropDown(),this.assistRef.style.cursor=this.config.lineRadius50?this.featherCursor:"crosshair",this.assistRef.onmousedown=function(e){var i,s,o=e.clientX,n=e.clientY,a=t.canvasX,r=t.canvasY,c=o-a,l=n-r;t.setStyle(),t.assistCtx.moveTo(c,l),document.onmousemove=function(e){i=e.clientX-o,s=e.clientY-n,t.assistCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.assistCtx.beginPath(),t.config.lineRadius50?t.assistCtx.ellipse(c+i/2,l+s/2,Math.abs(i/2),t.config.lineWidth/2,0,0,2*Math.PI):t.assistCtx.ellipse(c+i/2,l+s/2,Math.abs(i/2),Math.abs(s/2),0,0,2*Math.PI),t.assistCtx.stroke()},document.onmouseup=function(){t.assistCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.displayCtx.beginPath(),t.config.lineRadius50?t.displayCtx.ellipse(c+i/2,l+s/2,Math.abs(i/2),t.config.lineWidth/2,0,0,2*Math.PI):t.displayCtx.ellipse(c+i/2,l+s/2,Math.abs(i/2),Math.abs(s/2),0,0,2*Math.PI),t.displayCtx.stroke(),t.recordAndClearEvents()}}},clickArrow:function(){var t=this;this.colseDropDown(),this.assistRef.style.cursor=this.featherCursor,this.assistRef.onmousedown=function(e){var i,s,o,n,a,r,l,h,u=e.clientX,d=e.clientY,p=t.canvasX,f=t.canvasY,g=u-p,m=d-f;t.setStyle(),document.onmousemove=function(e){i=e.clientX-p,s=e.clientY-f;var u=v(g,m,i,s),d=Object(c["a"])(u,6);o=d[0],n=d[1],a=d[2],r=d[3],l=d[4],h=d[5],t.assistCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.assistCtx.beginPath(),t.assistCtx.moveTo(g,m),t.assistCtx.lineTo(i,s),t.assistCtx.moveTo(a,r),t.assistCtx.lineTo(o,n),t.assistCtx.lineTo(i,s),t.assistCtx.lineTo(l,h),t.assistCtx.lineTo(a,r),t.assistCtx.stroke()},document.onmouseup=function(){t.assistCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.displayCtx.beginPath(),t.displayCtx.moveTo(g,m),t.displayCtx.lineTo(i,s),t.displayCtx.moveTo(a,r),t.displayCtx.lineTo(o,n),t.displayCtx.lineTo(i,s),t.displayCtx.lineTo(l,h),t.displayCtx.lineTo(a,r),t.displayCtx.stroke(),t.recordAndClearEvents()}}},clickLine:function(){var t=this;this.assistRef.style.cursor=this.featherCursor,this.config.lineRadius50?this.clickCircle():this.assistRef.onmousedown=function(e){var i,s,o=e.clientX,n=e.clientY,a=t.canvasX,r=t.canvasY,c=o-a,l=n-r;t.setStyle(),document.onmousemove=function(e){i=e.clientX-a,s=e.clientY-r,t.assistCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.assistCtx.beginPath(),t.assistCtx.moveTo(c,l),t.assistCtx.lineTo(i,s),t.assistCtx.stroke()},document.onmouseup=function(){t.assistCtx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.displayCtx.beginPath(),t.displayCtx.moveTo(c,l),t.displayCtx.lineTo(i,s),t.displayCtx.stroke(),t.recordAndClearEvents()}}},clickText:function(){var t=this;this.colseDropDown(),this.assistRef.style.cursor="text",this.inputText=!0,this.assistRef.onmousedown=function(e){var i=e.clientX,s=e.clientY,o=document.createElement("div");o.className="textInput",o.contentEditable=!0,o.style.position="absolute",o.style.left=i+"px",o.style.top=s+"px",o.style.zIndex=9999,o.style.color=t.config.lineColor,o.style.padding="5px",o.style.lineHeight=t.fontSize+"px",o.style.fontSize=t.fontSize+"px",o.style.fontFamily="Microsoft YaHei,Sans Serif,System UI",o.style.cursor="text",o.onblur=t.textInputBlur,o.onkeydown=t.textInputKeyDown,t.$root.$el.appendChild(o),document.onmousemove=function(t){o.style.width=t.clientX-i+"px",o.style.height=t.clientY-s+"px"},document.onmouseup=function(){o.focus(),document.onmousemove=null,t.assistRef.onmousedown=null}}},clickBrush:function(){var t=this;this.colseDropDown(),this.assistRef.style.cursor=this.brushCursor,this.assistRef.onmousedown=function(e){var i=e.clientX,s=e.clientY,o=t.canvasX,n=t.canvasY,a=i-o,r=s-n;t.setStyle(),t.displayCtx.moveTo(a,r),document.onmousemove=function(e){var i=e.clientX,s=e.clientY,a=i-o,r=s-n;t.displayCtx.lineTo(a,r),t.displayCtx.stroke()},document.onmouseup=function(){var e=t.displayCtx.getImageData(0,0,t.canvasWidth,t.canvasHeight);t.recordsQueue.push(e),t.recordAndClearEvents()}}},clickLineShape:function(){this.showColorPicker=!1,this.showLineShape=!this.showLineShape},clickColor:function(){this.showLineShape=!1,this.showColorPicker=!this.showColorPicker},clickRecognition:function(){this.colseDropDown()},clickSave:function(){var t=this;m["remote"].dialog.showSaveDialog({title:"ÂõæÁâáÂè¶Â≠ò‰∏∫",defaultPath:this.$root.$data.savePath,filters:[{name:"*.png",extensions:["png"]},{name:"*.jpeg",extensions:["jpeg"]}],nameFieldLabel:(new Date).toLocaleTimeString()}).then((function(e){var i=C.a.parse(e.filePath),s=i.ext,o=t.displayRef.toDataURL("image/png");".jpeg"!==s&&".jpg"!==s||(o=t.displayRef.toDataURL("image/jpeg",1));var n=o.replace(/^data:image\/\w+;base64,/,""),a=new Buffer(n,"base64"),r=x.a.createWriteStream(e.filePath,{encoding:"utf8",autoClose:!0});r.write(a),r.on("error",(function(e){if(e)throw e;if(t.$root.$data.showMessage){var i=new Notification("‰øùÂ≠òÂ§±Ë¥•,ÊÇ®ÂèØËÉΩÂèñÊ∂à‰∫ÜÊìç‰Ωú",{silent:!0});setTimeout((function(){i.close()}),1500)}}))}))},clickNo:function(){var t=this;this.colseDropDown(),this.$emit("initSelect"),this.assistRef.style.cursor="move",this.recordsQueue=[0],this.displayCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight);var e=document.getElementsByClassName("textInput");e.forEach((function(e){return t.$root.$el.removeChild(e)}))},clickYes:function(){var t=this.$root.$data,e=t.showMessage,i=t.playSound,s=this.displayRef.toDataURL("image/png"),o=m["nativeImage"].createFromDataURL(s);if(m["clipboard"].writeImage(o),i&&this.$refs.audio.play(),e){var n=new Notification("",{body:"Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø",silent:!0,icon:s});setTimeout((function(){n.close()}),1500)}this.clickNo(),m["remote"].getCurrentWindow().minimize()},textInputBlur:function(t){var e=this;if(t.target.textContent){var i=parseInt(t.target.style.left)-this.canvasX+5,s=parseInt(t.target.style.top)-this.canvasY+5,o=parseInt(t.target.style.width),n=t.target.innerHTML+"<div><br></div>",a=[];n.split("<div>").forEach((function(t){return a.push(t.replace(/<\/div>/g,"").replace(/<br>/g,"").replace(/&nbsp;/g,""))}));var r=this.displayCtx.measureText(a[0]).width,c=Math.ceil(r/o),l=Math.ceil((o-10-4)/(this.fontSize+4));this.displayCtx.font="".concat(this.fontSize,"px Èªë‰Ωì,Microsoft YaHei,Sans Serif,System UI"),this.displayCtx.fillStyle=this.config.lineColor,this.displayCtx.lineWidth=this.config.lineWidth;var h=1;a.forEach((function(t,o){if(0===o)for(var n=0;n<c;n++){var a="";for(var r in t)r>=n*l&&r<(n+1)*l&&(a+=t[r]);e.displayCtx.fillText(a,i,s+(e.fontSize+h)*n),a=""}else e.displayCtx.fillText(t,i,s+(e.fontSize+h)*(c+o))})),this.$root.$el.removeChild(t.target);var u=this.displayCtx.getImageData(0,0,this.canvasWidth,this.canvasHeight);this.recordsQueue.push(u)}},textInputKeyDown:function(t){""===t.target.innerHTML&&8===t.keyCode&&this.$root.$el.removeChild(t.target),46===t.keyCode&&(t.target.innerHTML="",this.$root.$el.removeChild(t.target))}}},k=w,S=(i("be76"),i("2877")),R=Object(S["a"])(k,a,r,!1,null,"68135aa0",null),D=R.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"colortip"}},[i("div",{style:t.tipboardStyle,attrs:{id:"tipboard"}},[i("ul",[i("li",[i("span",[t._v("x :")]),t._v(t._s(t.left)+" "),i("span",{staticStyle:{"padding-left":"20px"}},[t._v("y :")]),t._v(t._s(t.top)+" ")]),i("li",[i("span",{style:{textDecoration:t.switchColor?"none":"underline rgba(241,90,39,255)"}},[t._v("hex :")]),i("span",{style:{color:t.hex}},[t._v(t._s(t.hex))])]),i("li",[i("span",{style:{textDecoration:t.switchColor?"underline rgba(241,90,39,255)":"none"}},[t._v("rgba:")]),i("span",{style:{color:"rgba"+t.rgba}},[t._v(t._s(t.rgba))])]),i("li",[i("span",[t._v("ÊåâcÂ§çÂà∂ shiftÂàáÊç¢")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.hasCopy,expression:"hasCopy"}]},[t._v("Â∑≤Â§çÂà∂")])])])])])},P=[],T=(i("fb6a"),i("d3b7"),i("25f0"),function(t){var e=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),i=parseFloat(e[3]||1),s=Math.floor(i*parseInt(e[0])+255*(1-i)),o=Math.floor(i*parseInt(e[1])+255*(1-i)),n=Math.floor(i*parseInt(e[2])+255*(1-i));return"#"+("0"+s.toString(16)).slice(-2)+("0"+o.toString(16)).slice(-2)+("0"+n.toString(16)).slice(-2)}),I=T,M={data:function(){return{left:0,top:0,hex:"#000000",rgba:"(0,0,0,0)",switchColor:!1,hasCopy:!1,themeDark:"dark"===this.$root.$data.theme}},computed:{tipboardStyle:function(){var t,e;this.left>180?(t=this.top-50+"px",e=this.left-220+"px"):(e=this.left+30+"px",t=this.top-50+"px");var i=this.themeDark?"#6c757d":"#fff",s=this.themeDark?"#fff":"#6c757d";return{position:"absolute",border:"2px ".concat(this.hex," dashed"),background:i,color:s,left:e,top:t}}},mounted:function(){var t=this,e=document.getElementById("mask"),i=document.getElementById("desktop-canvas"),s=i.getContext("2d");e.onmousemove=function(e){t.left=e.clientX,t.top=e.clientY;var i=s.getImageData(t.left,t.top,1,1),o=i.data[0],n=i.data[1],a=i.data[2],r=i.data[3];t.rgba="(".concat(o,",").concat(n,",").concat(a,",").concat(r,")"),t.hex=I("rgba"+t.rgba)},document.onkeydown=function(e){if(t.isCapture)return!1;if(16===e.keyCode&&(t.switchColor=!t.switchColor),67===e.keyCode){t.hasCopy=!0;var i=t.switchColor?"rgba"+t.rgba:t.hex;navigator.clipboard.writeText(i),setTimeout((function(){t.hasCopy&&(t.hasCopy=!1)}),2e3)}}}},$=M,H=(i("6481"),Object(S["a"])($,W,P,!1,null,"70b686e7",null)),Y=H.exports,_=i("b85c"),X=(i("96cf"),i("1da1")),L=m["remote"].screen.getPrimaryDisplay(),B=L.id,E=L.size,j=function(t,e,i){var s=t.getContext("2d"),o=s.backingStorePixelRatio||s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1,n=(window.devicePixelRatio||1)/o;return t.width=e*n,t.height=i*n,s.scale(n,n),t.style.width=e+"px",t.style.height=i+"px",s},O=function(){"win32"===process.platform?m["desktopCapturer"].getSources({types:["screen"],thumbnailSize:{width:0,height:0}}).then(function(){var t=Object(X["a"])(regeneratorRuntime.mark((function t(e){var i,s,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=Object(_["a"])(e),t.prev=1,i.s();case 3:if((s=i.n()).done){t.next=12;break}if(o=s.value,o.display_id!==B.toString()){t.next=10;break}return t.next=8,navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o.id,minWidth:E.width,maxWidth:E.width,minHeight:E.height,maxHeight:E.height}}});case 8:n=t.sent,z(n);case 10:t.next=3;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),i.e(t.t0);case 17:return t.prev=17,i.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,14,17,20]])})));return function(e){return t.apply(this,arguments)}}()):navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",minWidth:E.width,maxWidth:E.width,minHeight:E.height,maxHeight:E.height}}}).then((function(t){return z(t)}))},z=function(t){var e=document.getElementById("video");e.srcObject=t,e.onloadedmetadata=function(){e.play();var i=document.getElementById("desktop-canvas");i.width=E.width,i.height=E.height,i.style.width=E.width+"px",i.style.height=E.height+"px";var s=i.getContext("2d");s.clearRect(0,0,E.width,E.height),createImageBitmap(e).then((function(e){s.drawImage(e,0,0),t.getTracks()[0].stop()}))}};m["ipcRenderer"].on("flushDesktopCapture",(function(){return O()}));var N={name:"app",components:{ToolBar:D,ColorTip:Y},data:function(){return{x:0,y:0,width:0,height:0,win32:"win32"===process.platform,isCapture:!1,completeSelectRegion:!1,canDrag:!0,captureRegionStyle:{position:"absolute",zIndex:99,background:"rgba(0,0,0,0)",draggable:!1,borderWidth:"2px",borderColor:this.$root.$data.captureColor,borderStyle:"solid",boxShadow:"0px 0px 2px 2px rgba(85, 80, 80, 0.3)",left:"0px",top:"0px",width:"0px",height:"0px"},showColorTip:this.$root.$data.showColorTip}},mounted:function(){O()},computed:{toolbarBottom:function(){return this.$root.$data.screenHeight-(this.y+this.height+60+40)},canvasX:function(){return this.x+parseInt(this.captureRegionStyle.borderWidth)},canvasY:function(){return this.y+parseInt(this.captureRegionStyle.borderWidth)},canvasWidth:function(){var t=this.width-2*parseInt(this.captureRegionStyle.borderWidth);return t>0?t:0},canvasHeight:function(){var t=this.height-2*parseInt(this.captureRegionStyle.borderWidth);return t>0?t:0}},methods:{clipDesktop:function(){var t=this.$refs.desktop,e=this.$refs.display.getContext("2d");e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.drawImage(t,this.canvasX,this.canvasY,this.canvasWidth,this.canvasHeight,0,0,this.canvasWidth,this.canvasHeight),e.globalCompositeOperation="source-over"},initSelect:function(){this.completeSelectRegion=!1,this.isCapture=!1,this.canDrag=!0,this.captureRegionStyle.left="0px",this.captureRegionStyle.top="0px",this.captureRegionStyle.width="0px",this.captureRegionStyle.height="0px"},onSelectRegion:function(t){var e=this;if(this.completeSelectRegion)return!1;this.initSelect(),this.x=t.clientX,this.y=t.clientY,this.captureRegionStyle.left=this.x+"px",this.captureRegionStyle.top=this.y+"px",document.onmousemove=function(t){var i=t.clientX-e.x,s=t.clientY-e.y;e.isCapture=i>15,e.isCapture&&(e.width=i,e.height=s,e.captureRegionStyle.width=e.width+"px",e.captureRegionStyle.height=e.height+"px")},document.onmouseup=function(){document.onmousemove=null,e.completeSelectRegion=e.canDrag=e.isCapture,j(e.$refs.display,e.canvasWidth,e.canvasHeight),j(e.$refs.assist,e.canvasWidth,e.canvasHeight),e.clipDesktop()}},onDrag:function(t){var e=this;if(this.completeSelectRegion&&this.canDrag){var i=t.clientX-this.x,s=t.clientY-this.y;document.onmousemove=function(t){e.completeSelectRegion=!1;var o=t.clientX-i,n=t.clientY-s;o<0?o=0:o>document.body.clientWidth-e.width&&(o=document.body.clientWidth-e.width),n<0?n=0:n>document.body.clientHeight-e.height&&(n=document.body.clientHeight-e.height),e.x=o,e.y=n,e.captureRegionStyle.left=e.x+"px",e.captureRegionStyle.top=e.y+"px"},document.onmouseup=function(){document.onmousemove=null,e.completeSelectRegion=!0,j(e.$refs.display,e.canvasWidth,e.canvasHeight),j(e.$refs.assist,e.canvasWidth,e.canvasHeight),e.clipDesktop()}}}},directives:{position:function(t,e){var i=e.value,s=i.x,o=i.y,n=i.width,a=i.height,r=document.body,c=r.clientWidth,l=r.clientHeight,h=575,u=40,d=(h-n)/2>s,p=(h-n)/2>c-s-n,f=u+20>l-o-a;t.style.position="absolute",t.style.zIndex=999,t.style.left=d?"10px":p?c-h-20+"px":s+n/2-h/2+"px",t.style.top=f?o-60+"px":o+a+40+"px"}}},q=N,Q=(i("7c55"),Object(S["a"])(q,o,n,!1,null,null,null)),U=Q.exports,A=i("5f5b"),F=i("b1e0"),J=(i("f9e3"),i("2dd8"),i("63a9")),K=i.n(J);s["default"].use(A["a"]),s["default"].use(F["a"]),s["default"].config.productionTip=!1;var G=new K.a({name:"settings"}),V=m["remote"].screen.getPrimaryDisplay().size,Z=V.width,tt=V.height;new s["default"]({data:function(){return{screenWidth:Z,screenHeight:tt,theme:G.get("theme")||"dark",showColorTip:G.get("showColorTip"),showMessage:G.get("showMessage"),savePath:G.get("savePath")||m["remote"].app.getPath("pictures"),playSound:G.get("playSound"),captureColor:G.get("captureColor")||"#ffffff"}},render:function(t){return t(U)}}).$mount("#app")},c3c0:function(t,e,i){t.exports=i.p+"img/brush.03c8929f.svg"},fd5c:function(t,e,i){t.exports=i.p+"media/iphone.abfdd1df.mp3"},ff4a:function(t,e){t.exports=require("events")}});
//# sourceMappingURL=main.0d5d6eee.js.map